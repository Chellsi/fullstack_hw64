# Express RESTful API –∑ Middleware —Ç–∞ –®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä–∞–º–∏

RESTful API —Å–µ—Ä–≤–µ—Ä –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Express.js, —è–∫–∏–π –≤–∫–ª—é—á–∞—î —Å–∏—Å—Ç–µ–º—É middleware –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è, –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó, –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö —Ç–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø—É. –ü—Ä–æ–µ–∫—Ç –ø—ñ–¥—Ç—Ä–∏–º—É—î –¥–≤–∞ —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä–∏: **PUG** –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ **EJS** –¥–ª—è —Å—Ç–∞—Ç–µ–π.

## üìã –ó–º—ñ—Å—Ç

- [–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó](#—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó)
- [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
- [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)
- [–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä–∏](#—à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä–∏)
- [Middleware](#middleware)
- [–ú–∞—Ä—à—Ä—É—Ç–∏](#–º–∞—Ä—à—Ä—É—Ç–∏)
- [–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è](#—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
- [–ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è](#–ø—Ä–∏–∫–ª–∞–¥–∏-–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è)

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Node.js** - —Å–µ—Ä–≤–µ—Ä–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
- **Express.js** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Node.js
- **PUG** - —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä –¥–ª—è —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **EJS** - —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä –¥–ª—è —Å—Ç–æ—Ä—ñ–Ω–æ–∫ —Å—Ç–∞—Ç–µ–π
- **ES Modules** - —Å—É—á–∞—Å–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –º–æ–¥—É–ª—ñ–≤ JavaScript
- **CSS3** - —Å—É—á–∞—Å–Ω—ñ —Å—Ç–∏–ª—ñ –∑ responsive –¥–∏–∑–∞–π–Ω–æ–º
- **Vitest** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- **Supertest** - –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è HTTP

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:
```bash
git clone <your-repository-url>
cd fullstack_hw61
```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
```bash
npm install
# –∞–±–æ
yarn install
```

–í—Å—Ç–∞–Ω–æ–≤–ª—è—Ç—å—Å—è –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
- `express` - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- `pug` - —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä PUG
- `ejs` - —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä EJS

## üöÄ –ó–∞–ø—É—Å–∫

### –†–µ–∂–∏–º —Ä–æ–∑—Ä–æ–±–∫–∏ (–∑ –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è–º):
```bash
npm run dev
```

### –†–µ–∂–∏–º –ø—Ä–æ–¥–∞–∫—à–Ω:
```bash
npm start
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é: `http://localhost:3000`

## üìÅ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –∑–∞ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–º MVC –∑ –º–æ–¥—É–ª—å–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é:

```
src/
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ usersController.js    # –õ–æ–≥—ñ–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ articlesController.js # –õ–æ–≥—ñ–∫–∞ —Å—Ç–∞—Ç–µ–π
‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îî‚îÄ‚îÄ index.js               # –í—Å—ñ middleware —Ñ—É–Ω–∫—Ü—ñ—ó
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ users.js               # –ú–∞—Ä—à—Ä—É—Ç–∏ –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ articles.js            # –ú–∞—Ä—à—Ä—É—Ç–∏ –¥–ª—è —Å—Ç–∞—Ç–µ–π
‚îú‚îÄ‚îÄ views/
‚îÇ   ‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.pug          # –°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (PUG)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ detail.pug         # –î–µ—Ç–∞–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (PUG)
‚îÇ   ‚îú‚îÄ‚îÄ articles/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ejs          # –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π (EJS)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ detail.ejs         # –î–µ—Ç–∞–ª—ñ —Å—Ç–∞—Ç—Ç—ñ (EJS)
‚îÇ   ‚îú‚îÄ‚îÄ partials/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ header.ejs         # Header –¥–ª—è EJS
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ footer.ejs         # Footer –¥–ª—è EJS
‚îÇ   ‚îú‚îÄ‚îÄ layout.pug             # Layout –¥–ª—è PUG
‚îÇ   ‚îú‚îÄ‚îÄ index.pug              # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (PUG)
‚îÇ   ‚îî‚îÄ‚îÄ error.pug              # –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø–æ–º–∏–ª–∫–∏ (PUG)
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ css/
‚îÇ       ‚îî‚îÄ‚îÄ style.css          # –°—Ç–∏–ª—ñ
‚îú‚îÄ‚îÄ __test__/
‚îÇ   ‚îî‚îÄ‚îÄ task1.test.js          # –¢–µ—Å—Ç–∏
‚îî‚îÄ‚îÄ server.mjs                 # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
```

## üé® –®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä–∏

### PUG –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

–ú–∞—Ä—à—Ä—É—Ç–∏ `/users/page` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä **PUG** –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤.

**–ü–µ—Ä–µ–≤–∞–≥–∏ PUG:**
- –ß–∏—Å—Ç–∏–π —Ç–∞ –ª–∞–∫–æ–Ω—ñ—á–Ω–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤—ñ–¥—Å—Ç—É–ø—ñ–≤ –∑–∞–º—ñ—Å—Ç—å –∑–∞–∫—Ä–∏–≤–∞—é—á–∏—Ö —Ç–µ–≥—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º—ñ–∫—Å—ñ–Ω—ñ–≤ —Ç–∞ —ñ–Ω–∫–ª—é–¥—ñ–≤
- –í–±—É–¥–æ–≤–∞–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ JavaScript –≤–∏—Ä–∞–∑—ñ–≤

**–ü—Ä–∏–∫–ª–∞–¥ —à–∞–±–ª–æ–Ω—É PUG:**
```pug
extends layout

block content
  .users-grid
    each user in users
      .user-card
        h3= user.name
        p= user.email
```

### EJS –¥–ª—è —Å—Ç–∞—Ç–µ–π

–ú–∞—Ä—à—Ä—É—Ç–∏ `/articles/page` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å —à–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä **EJS** –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–æ–∫ —Å—Ç–∞—Ç–µ–π.

**–ü–µ—Ä–µ–≤–∞–≥–∏ EJS:**
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å —Å—Ö–æ–∂–∏–π –Ω–∞ HTML
- –ü—Ä–æ—Å—Ç–∏–π –¥–ª—è –Ω–æ–≤–∞—á–∫—ñ–≤
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤—Å—Ç–∞–≤–∫–∏ JavaScript –∫–æ–¥—É
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —á–∞—Å—Ç–∫–æ–≤–∏—Ö —à–∞–±–ª–æ–Ω—ñ–≤ (partials)

**–ü—Ä–∏–∫–ª–∞–¥ —à–∞–±–ª–æ–Ω—É EJS:**
```html
<%- include('partials/header') %>
<% articles.forEach(function(article) { %>
  <h2><%= article.title %></h2>
<% }); %>
<%- include('partials/footer') %>
```

## üîß Middleware

### 1. **–õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤** (`logRequests`)
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ó–∞–ø–∏—Å—É—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –¥–æ —Å–µ—Ä–≤–µ—Ä–∞
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ì–ª–æ–±–∞–ª—å–Ω–æ –¥–ª—è –≤—Å—ñ—Ö –º–∞—Ä—à—Ä—É—Ç—ñ–≤
- **–§–æ—Ä–º–∞—Ç –ª–æ–≥—É**: `2025-01-15T10:30:45.123Z - GET request to /users`

### 2. **–ë–∞–∑–æ–≤–∞ –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è** (`basicAuth`)
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç–∞ —Ñ–æ—Ä–º–∞—Ç Authorization –∑–∞–≥–æ–ª–æ–≤–∫–∞
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ù–∞ –º–∞—Ä—à—Ä—É—Ç–∞—Ö `/users` —Ç–∞ `/articles`
- **–§–æ—Ä–º–∞—Ç**: `Authorization: Bearer <token>`
- **–°—Ç–∞—Ç—É—Å –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ**: `401 Unauthorized`

### 3. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞** (`validateUserInput`)
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –æ–±–æ–≤'—è–∑–∫–æ–≤–æ–≥–æ –ø–æ–ª—è `name`
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ù–∞ POST —Ç–∞ PUT –∑–∞–ø–∏—Ç–∞—Ö –¥–æ `/users`
- **–°—Ç–∞—Ç—É—Å –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ**: `400 Bad Request`

### 4. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö —Å—Ç–∞—Ç—Ç—ñ** (`validateArticleInput`)
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞—è–≤–Ω—ñ—Å—Ç—å –æ–±–æ–≤'—è–∑–∫–æ–≤–æ–≥–æ –ø–æ–ª—è `title`
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ù–∞ POST —Ç–∞ PUT –∑–∞–ø–∏—Ç–∞—Ö –¥–æ `/articles`
- **–°—Ç–∞—Ç—É—Å –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ**: `400 Bad Request`

### 5. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É** (`checkArticleAccess`)
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä—è—î –ø—Ä–∞–≤–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑—ñ —Å—Ç–∞—Ç—Ç—è–º–∏
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ù–∞ –≤—Å—ñ—Ö –º–∞—Ä—à—Ä—É—Ç–∞—Ö `/articles`
- **–î–æ–∑–≤–æ–ª–µ–Ω—ñ —Ä–æ–ª—ñ**: `admin`, `author`
- **–°—Ç–∞—Ç—É—Å –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ**: `403 Forbidden`

### 6. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —ñ—Å–Ω—É–≤–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—É** (`checkResourceExists`)
- **–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ —ñ—Å–Ω—É—î —Ä–µ—Å—É—Ä—Å –∑ –≤–∫–∞–∑–∞–Ω–∏–º ID
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ù–∞ –º–∞—Ä—à—Ä—É—Ç–∞—Ö –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `:userId` –∞–±–æ `:articleId`
- **–°—Ç–∞—Ç—É—Å –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ**: `404 Not Found`

## üõ£ –ú–∞—Ä—à—Ä—É—Ç–∏

### –í–µ–±-—Å—Ç–æ—Ä—ñ–Ω–∫–∏ (HTML)

#### –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
- **URL**: `GET /`
- **–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä**: PUG
- **–û–ø–∏—Å**: –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –¥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —Ç–∞ —Å—Ç–∞—Ç–µ–π
- **–ü—Ä–∏–∫–ª–∞–¥**: –í—ñ–¥–∫—Ä–∏–π—Ç–µ `http://localhost:3000/` –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

#### –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (PUG)

**–°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤**
- **URL**: `GET /users/page`
- **–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä**: PUG
- **–û–ø–∏—Å**: –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ —É –≤–∏–≥–ª—è–¥—ñ –∫–∞—Ä—Ç–æ–∫
- **–î–∞–Ω—ñ**: ID, —ñ–º'—è, email, —Ä–æ–ª—å
- **–ü—Ä–∏–∫–ª–∞–¥**: `http://localhost:3000/users/page`

**–î–µ—Ç–∞–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞**
- **URL**: `GET /users/page/:userId`
- **–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä**: PUG
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `userId` (123, 456, 789)
- **–û–ø–∏—Å**: –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–ü—Ä–∏–∫–ª–∞–¥**: `http://localhost:3000/users/page/123`

#### –°—Ç–∞—Ç—Ç—ñ (EJS)

**–°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π**
- **URL**: `GET /articles/page`
- **–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä**: EJS
- **–û–ø–∏—Å**: –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö —Å—Ç–∞—Ç–µ–π –∑ –∫–æ—Ä–æ—Ç–∫–∏–º –æ–ø–∏—Å–æ–º
- **–î–∞–Ω—ñ**: ID, –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∞–≤—Ç–æ—Ä, –¥–∞—Ç–∞, –ø–µ—Ä–µ–≥–ª—è–¥–∏, –∫–æ–Ω—Ç–µ–Ω—Ç
- **–ü—Ä–∏–∫–ª–∞–¥**: `http://localhost:3000/articles/page`

**–î–µ—Ç–∞–ª—ñ —Å—Ç–∞—Ç—Ç—ñ**
- **URL**: `GET /articles/page/:articleId`
- **–®–∞–±–ª–æ–Ω—ñ–∑–∞—Ç–æ—Ä**: EJS
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `articleId` (456, 789, 101)
- **–û–ø–∏—Å**: –ü–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—Ç—ñ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏
- **–ü—Ä–∏–∫–ª–∞–¥**: `http://localhost:3000/articles/page/456`

---

### API Endpoints (JSON/Text)

–í—Å—ñ API endpoints –≤–∏–º–∞–≥–∞—é—Ç—å –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`

#### `GET /users`
- **–û–ø–∏—Å**: –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- **Middleware**: `logRequests`, `basicAuth`
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: `Authorization: Bearer <token>`
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `200 OK` - "Get users route"

#### `POST /users`
- **–û–ø–∏—Å**: –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **Middleware**: `logRequests`, `basicAuth`, `validateUserInput`
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: `Authorization: Bearer <token>`
- **–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É**:
```json
{
  "name": "–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞"
}
```
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `201 Created` - "Post users route"
- **–ü–æ–º–∏–ª–∫–∏**: 
  - `400 Bad Request` - –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ
  - `401 Unauthorized` - –≤—ñ–¥—Å—É—Ç–Ω—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

#### `GET /users/:userId`
- **–û–ø–∏—Å**: –û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID
- **Middleware**: `logRequests`, `basicAuth`, `checkResourceExists`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `userId` - ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (123, 456, 789)
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `200 OK` - "Get user by Id route: {userId}"
- **–ü–æ–º–∏–ª–∫–∏**: `404 Not Found` - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π

#### `PUT /users/:userId`
- **–û–ø–∏—Å**: –û–Ω–æ–≤–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID
- **Middleware**: `logRequests`, `basicAuth`, `checkResourceExists`, `validateUserInput`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `userId` - ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É**:
```json
{
  "name": "–û–Ω–æ–≤–ª–µ–Ω–µ —ñ–º'—è"
}
```
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `200 OK` - "Put user by Id route: {userId}"
- **–ü–æ–º–∏–ª–∫–∏**: 
  - `400 Bad Request` - –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ
  - `404 Not Found` - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π

#### `DELETE /users/:userId`
- **–û–ø–∏—Å**: –í–∏–¥–∞–ª–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID
- **Middleware**: `logRequests`, `basicAuth`, `checkResourceExists`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `userId` - ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `204 No Content`
- **–ü–æ–º–∏–ª–∫–∏**: `404 Not Found` - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π

---

### –ú–∞—Ä—à—Ä—É—Ç–∏ —Å—Ç–∞—Ç–µ–π

#### `GET /articles`
- **–û–ø–∏—Å**: –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –≤—Å—ñ—Ö —Å—Ç–∞—Ç–µ–π
- **Middleware**: `logRequests`, `basicAuth`, `checkArticleAccess`
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: `Authorization: Bearer <token>`
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `200 OK` - "Get articles route"
- **–ü–æ–º–∏–ª–∫–∏**: `403 Forbidden` - –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∞–≤

#### `POST /articles`
- **–û–ø–∏—Å**: –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É —Å—Ç–∞—Ç—Ç—é
- **Middleware**: `logRequests`, `basicAuth`, `checkArticleAccess`, `validateArticleInput`
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏**: `Authorization: Bearer <token>`
- **–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É**:
```json
{
  "title": "–ù–∞–∑–≤–∞ —Å—Ç–∞—Ç—Ç—ñ"
}
```
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `201 Created` - "Post articles route"
- **–ü–æ–º–∏–ª–∫–∏**: 
  - `400 Bad Request` - –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ
  - `403 Forbidden` - –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∞–≤

#### `GET /articles/:articleId`
- **–û–ø–∏—Å**: –û—Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞—Ç—Ç—é –∑–∞ ID
- **Middleware**: `logRequests`, `basicAuth`, `checkArticleAccess`, `checkResourceExists`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `articleId` - ID —Å—Ç–∞—Ç—Ç—ñ (456, 789, 101)
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `200 OK` - "Get article by Id route: {articleId}"
- **–ü–æ–º–∏–ª–∫–∏**: 
  - `403 Forbidden` - –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∞–≤
  - `404 Not Found` - —Å—Ç–∞—Ç—Ç—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞

#### `PUT /articles/:articleId`
- **–û–ø–∏—Å**: –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∞—Ç—Ç—é –∑–∞ ID
- **Middleware**: `logRequests`, `basicAuth`, `checkArticleAccess`, `checkResourceExists`, `validateArticleInput`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `articleId` - ID —Å—Ç–∞—Ç—Ç—ñ
- **–¢—ñ–ª–æ –∑–∞–ø–∏—Ç—É**:
```json
{
  "title": "–û–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞–∑–≤–∞ —Å—Ç–∞—Ç—Ç—ñ"
}
```
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `200 OK` - "Put article by Id route: {articleId}"
- **–ü–æ–º–∏–ª–∫–∏**: 
  - `400 Bad Request` - –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω—ñ –¥–∞–Ω—ñ
  - `403 Forbidden` - –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∞–≤
  - `404 Not Found` - —Å—Ç–∞—Ç—Ç—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞

#### `DELETE /articles/:articleId`
- **–û–ø–∏—Å**: –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ç—Ç—é –∑–∞ ID
- **Middleware**: `logRequets`, `basicAuth`, `checkArticleAccess`, `checkResourceExists`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏**: `articleId` - ID —Å—Ç–∞—Ç—Ç—ñ
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `204 No Content`
- **–ü–æ–º–∏–ª–∫–∏**: 
  - `403 Forbidden` - –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –ø—Ä–∞–≤
  - `404 Not Found` - —Å—Ç–∞—Ç—Ç—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∞

---

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

#### –ù–µ—ñ—Å–Ω—É—é—á–∏–π –º–∞—Ä—à—Ä—É—Ç
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `404 Not Found` - "Not Found"

#### –í–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–æ–º–∏–ª–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
- **–í—ñ–¥–ø–æ–≤—ñ–¥—å**: `500 Internal Server Error` - "Internal Server Error"

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤:
```bash
npm test
```

–¢–µ—Å—Ç–∏ –ø–æ–∫—Ä–∏–≤–∞—é—Ç—å:
- ‚úÖ –í—Å—ñ –º–∞—Ä—à—Ä—É—Ç–∏ API
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—é –¥–∞–Ω–∏—Ö
- ‚úÖ –û–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –°—Ç–∞—Ç—É—Å-–∫–æ–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

## üìù –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü–µ—Ä–µ–≥–ª—è–¥ –≤–µ–±-—Å—Ç–æ—Ä—ñ–Ω–æ–∫

#### 1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
```
http://localhost:3000/
```

#### 2. –ü–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (PUG):
```
http://localhost:3000/users/page
```

#### 3. –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:
```
http://localhost:3000/users/page/123
```

#### 4. –ü–µ—Ä–µ–≥–ª—è–¥ —Å–ø–∏—Å–∫—É —Å—Ç–∞—Ç–µ–π (EJS):
```
http://localhost:3000/articles/page
```

#### 5. –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Å—Ç–∞—Ç—Ç—ñ:
```
http://localhost:3000/articles/page/456
```

---

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è API –∑ curl

#### –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (API):
```bash
curl -H "Authorization: Bearer your-token" http://localhost:3000/users
```

#### –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:
```bash
curl -X POST http://localhost:3000/users \
  -H "Authorization: Bearer your-token" \
  -H "Content-Type: application/json" \
  -d '{"name":"–Ü–≤–∞–Ω –ü–µ—Ç—Ä–µ–Ω–∫–æ"}'
```

#### –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π (API):
```bash
curl -H "Authorization: Bearer your-token" http://localhost:3000/articles
```

#### –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤—É —Å—Ç–∞—Ç—Ç—é:
```bash
curl -X POST http://localhost:3000/articles \
  -H "Authorization: Bearer your-token" \
  -H "Content-Type: application/json" \
  -d '{"title":"–ú–æ—è —Å—Ç–∞—Ç—Ç—è"}'
```

---

### –°–∫—Ä–∏–Ω—à–æ—Ç–∏ —Ç–∞ –æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

#### –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
- –ö—Ä–∞—Å–∏–≤–∏–π hero-–±–ª–æ–∫ –∑ –≥—Ä–∞–¥—ñ—î–Ω—Ç–æ–º
- –¢—Ä–∏ –∫–∞—Ä—Ç–∫–∏ –∑ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –¥–æ —Ä–æ–∑–¥—ñ–ª—ñ–≤
- –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω

#### –°—Ç–æ—Ä—ñ–Ω–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (PUG)
- –°—ñ—Ç–∫–∞ –∫–∞—Ä—Ç–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ê–≤–∞—Ç–∞—Ä–∏ –∑ —ñ–Ω—ñ—Ü—ñ–∞–ª–∞–º–∏
- –ë–µ–π–¥–∂—ñ –∑ —Ä–æ–ª—è–º–∏ (admin/user)
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –¥–µ—Ç–∞–ª–µ–π

#### –î–µ—Ç–∞–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (PUG)
- –í–µ–ª–∏–∫–∏–π –∞–≤–∞—Ç–∞—Ä –∑ —ñ–Ω—ñ—Ü—ñ–∞–ª–æ–º
- –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- Breadcrumb –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è
- –ö–Ω–æ–ø–∫–∏ –¥—ñ–π (—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏, –≤–∏–¥–∞–ª–∏—Ç–∏)

#### –°—Ç–æ—Ä—ñ–Ω–∫–∞ —Å—Ç–∞—Ç–µ–π (EJS)
- –°–ø–∏—Å–æ–∫ —Å—Ç–∞—Ç–µ–π —É –≤–∏–≥–ª—è–¥—ñ –∫–∞—Ä—Ç–æ–∫
- –ú–µ—Ç–∞–¥–∞–Ω—ñ (–∞–≤—Ç–æ—Ä, –¥–∞—Ç–∞, –ø–µ—Ä–µ–≥–ª—è–¥–∏)
- –ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å
- –ö–Ω–æ–ø–∫–∞ "–ß–∏—Ç–∞—Ç–∏ –¥–∞–ª—ñ"

#### –î–µ—Ç–∞–ª—ñ —Å—Ç–∞—Ç—Ç—ñ (EJS)
- –ü–æ–≤–Ω–∏–π —Ç–µ–∫—Å—Ç —Å—Ç–∞—Ç—Ç—ñ
- –ú–µ—Ç–∞–¥–∞–Ω—ñ –≤ —Ö–µ–¥–µ—Ä—ñ
- –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- Breadcrumb —Ç–∞ –∫–Ω–æ–ø–∫–∏ –¥—ñ–π `http://localhost:3000/articles`
4. –£ –≤–∫–ª–∞–¥—Ü—ñ **Headers** –¥–æ–¥–∞–π—Ç–µ:
   - Key: `Authorization`
   - Value: `Bearer your-token`
5. –î–ª—è POST/PUT –∑–∞–ø–∏—Ç—ñ–≤ —É –≤–∫–ª–∞–¥—Ü—ñ **Body** –≤–∏–±–µ—Ä—ñ—Ç—å **raw** —Ç–∞ **JSON**, –¥–æ–¥–∞–π—Ç–µ –¥–∞–Ω—ñ:
```json
{
  "name": "–¢–µ—Å—Ç–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á"
}
```

## üîí –ë–µ–∑–ø–µ–∫–∞

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞—î –±–∞–∑–æ–≤—ñ –º–µ—Ö–∞–Ω—ñ–∑–º–∏ –±–µ–∑–ø–µ–∫–∏:

- **–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è**: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Authorization –∑–∞–≥–æ–ª–æ–≤–∫–∞
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è**: –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ä–µ—Å—É—Ä—Å—ñ–≤
- **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **–û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫**: –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

> ‚ö†Ô∏è **–í–∞–∂–ª–∏–≤–æ**: –¶–µ –Ω–∞–≤—á–∞–ª—å–Ω–∏–π –ø—Ä–æ–µ–∫—Ç. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏:
> - –†–µ–∞–ª—å–Ω—É —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó (JWT, OAuth)
> - –®–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
> - HTTPS
> - Rate limiting
> - CORS –ø–æ–ª—ñ—Ç–∏–∫—É
> - –ë–∞–∑—É –¥–∞–Ω–∏—Ö

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

ISC

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–í–∞—à–µ —ñ–º'—è

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞**: –í—Å—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Å–µ—Ä–≤–µ—Ä–∞ —î —Ç–µ–∫—Å—Ç–æ–≤–∏–º–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –≤–∏–º–æ–≥ –∑–∞–≤–¥–∞–Ω–Ω—è.